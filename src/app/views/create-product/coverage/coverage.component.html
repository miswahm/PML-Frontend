<nb-card>
  <nb-card-header>Details</nb-card-header>
  <nb-card-body>
    <div class="row">
      <div class="col-1"></div>
      <div class="col-2 mt-3">
        <span class="font-weight-bold">Name :</span> {{ name }}
      </div>
      <div class="col-2 mt-3">
        <span class="font-weight-bold">Type :</span> {{ type }}
      </div>
      <div class="col-2 mt-3">
        <span class="font-weight-bold">Code :</span> {{ icdCode }}
      </div>
      <div class="col-3">
        <span class="font-weight-bold">Category :</span>
        <nb-select placeholder="Select Category">
          <nb-option value="">Option empty</nb-option>
          <nb-option value="0">Option 0</nb-option>
          <nb-option value="1">Option 1</nb-option>
          <nb-option value="2">Option 2</nb-option>
          <nb-option value="3">Option 3</nb-option>
          <nb-option value="4">Option 4</nb-option>
        </nb-select>
      </div>
      <div class="col-2 mt-3" style="color: green">
        <nb-icon icon="checkmark"></nb-icon> Covered
      </div>
    </div>
  </nb-card-body>
</nb-card>

<nb-card>
  <nb-card-header>Limits</nb-card-header>
  <nb-card-body>
    {{ planTypeCheck }} {{ planVariantCheck }} {{ sumInsuredCheck }}
    {{ applicabilityCheck }} {{ roomTypeCheck }}
    <div class="row text-center mb-3 mt-2">
      <nb-checkbox
        (checkedChange)="togglePlanType($event)"
        [(ngModel)]="planTypeCheck"
        [disabled]="
          roomTypeCheck &&
          planVariantCheck &&
          sumInsuredCheck &&
          applicabilityCheck
        "
        (click)="showToast('type', planTypeCheck)"
        >Plan Type</nb-checkbox
      >
      <nb-checkbox
        (checkedChange)="togglePlanVariant($event)"
        [(ngModel)]="planVariantCheck"
        [disabled]="
          planTypeCheck &&
          roomTypeCheck &&
          sumInsuredCheck &&
          applicabilityCheck
        "
        (click)="showToast('variant', planVariantCheck)"
        >Plan Variant</nb-checkbox
      >
      <nb-checkbox
        (checkedChange)="toggleSumInsured($event)"
        [(ngModel)]="sumInsuredCheck"
        [disabled]="
          planTypeCheck &&
          planVariantCheck &&
          roomTypeCheck &&
          applicabilityCheck
        "
        (click)="showToast('sum', sumInsuredCheck)"
        >Sum Insured</nb-checkbox
      >
      <nb-checkbox
        (checkedChange)="toggleApplicability($event)"
        [(ngModel)]="applicabilityCheck"
        [disabled]="
          planTypeCheck && planVariantCheck && sumInsuredCheck && roomTypeCheck
        "
        (click)="showToast('applicability', applicabilityCheck)"
        >Applicability</nb-checkbox
      >
      <nb-checkbox
        (checkedChange)="toggleRoomType($event)"
        [(ngModel)]="roomTypeCheck"
        [disabled]="
          planTypeCheck &&
          planVariantCheck &&
          sumInsuredCheck &&
          applicabilityCheck
        "
        (click)="showToast('room', roomTypeCheck)"
        >Room Type</nb-checkbox
      >
    </div>

    <table
      class="text-center"
      *ngIf="
        planTypeCheck ||
        planVariantCheck ||
        sumInsuredCheck ||
        applicabilityCheck ||
        roomTypeCheck
      "
    >
      <colgroup>
        <col span="3" />
        <col [attr.colspan]="applicability.length" />
      </colgroup>
      <thead>
        <tr *ngIf="planVariantCheck">
          <td *ngIf="planTypeCheck"></td>
          <td *ngIf="roomTypeCheck"></td>
          <td *ngIf="sumInsuredCheck"></td>
          <th
            [attr.colspan]="applicability.length"
            *ngFor="let variant of planVariant"
          >
            {{ variant }}
          </th>
        </tr>

        <tr *ngIf="sumInsuredCheck || applicabilityCheck">
          <td *ngIf="planTypeCheck"></td>
          <td *ngIf="roomTypeCheck"></td>
          <th colspan="1" *ngIf="sumInsuredCheck">Sum Insured</th>
          <ng-container *ngIf="applicabilityCheck">
            <ng-container *ngFor="let variant of planVariant">
              <th colspan="1" *ngFor="let item of applicability">{{ item }}</th>
            </ng-container>
          </ng-container>
        </tr>
      </thead>

      <tbody>
        <tr>
          <th [attr.rowspan]="sumInsuredIndi.length + 1" *ngIf="planTypeCheck">
            {{ planType[0] }}
          </th>
          <th rowspan="6" *ngIf="roomTypeCheck">{{ roomType[0] }}</th>
          <th *ngIf="sumInsuredCheck">
            {{ sumInsuredIndi[0] }}
          </th>
          <ng-container *ngFor="let variant of planVariant">
            <td *ngFor="let item of applicability">
              <input type="text" class="table-input" />
            </td>
          </ng-container>
        </tr>

        <tr *ngFor="let item of sumInsuredIndi; let i = index">
          <th *ngIf="sumInsuredCheck">
            <span *ngIf="i < sumInsuredIndi.length">{{
              sumInsuredIndi[i]
            }}</span>
          </th>
          <ng-container *ngFor="let variant of planVariant">
            <td *ngFor="let item of applicability">
              <input type="text" class="table-input" />
            </td>
          </ng-container>
        </tr>

        <tr>
          <th [attr.rowspan]="sumInsuredFloa.length + 1" *ngIf="planTypeCheck">
            {{ planType[1] }}
          </th>
          <!-- <th rowspan="6" *ngIf="roomTypeCheck">{{ roomType[0] }}</th> -->
          <th *ngIf="sumInsuredCheck">
            {{ sumInsuredFloa[0] }}
          </th>
          <ng-container *ngFor="let variant of planVariant">
            <td *ngFor="let item of applicability">
              <input type="text" class="table-input" />
            </td>
          </ng-container>
        </tr>

        <tr *ngFor="let item of sumInsuredFloa; let i = index">
          <th *ngIf="sumInsuredCheck">
            <span *ngIf="i < sumInsuredFloa.length">{{
              sumInsuredFloa[i]
            }}</span>
          </th>
          <ng-container *ngFor="let variant of planVariant">
            <td *ngFor="let item of applicability">
              <input type="text" class="table-input" />
            </td>
          </ng-container>
        </tr>
      </tbody>
    </table>
  </nb-card-body>
</nb-card>

<nb-card>
  <nb-card-header>Waiting Period</nb-card-header>
  <nb-card-body class="text-left">
    <form [formGroup]="waitingPeriodForm">
      <div formArrayName="conditions">
        <div *ngFor="let condition of waitingPeriod.controls; let i = index">
          <div [formGroupName]="i">
            <div class="row">
              <div class="col-10">
                {{ i + 1 }}.
                <input type="text" nbInput class="ml-2" />
                <nb-select placeholder="Select Time Period">
                  <nb-option value="">Option empty</nb-option>
                  <nb-option value="0">Option 0</nb-option>
                  <nb-option value="1">Option 1</nb-option>
                  <nb-option value="2">Option 2</nb-option>
                  <nb-option value="3">Option 3</nb-option>
                  <nb-option value="4">Option 4</nb-option>
                </nb-select>

                <span class="font-weight-bold ml-3">IF</span>

                <nb-select placeholder="Select Time Period" class="ml-1">
                  <nb-option value="">Option empty</nb-option>
                  <nb-option value="0">Option 0</nb-option>
                  <nb-option value="1">Option 1</nb-option>
                  <nb-option value="2">Option 2</nb-option>
                  <nb-option value="3">Option 3</nb-option>
                  <nb-option value="4">Option 4</nb-option>
                </nb-select>

                <nb-select placeholder="Select Time Period" class="ml-2">
                  <nb-option value="">Option empty</nb-option>
                  <nb-option value="0">Option 0</nb-option>
                  <nb-option value="1">Option 1</nb-option>
                  <nb-option value="2">Option 2</nb-option>
                  <nb-option value="3">Option 3</nb-option>
                  <nb-option value="4">Option 4</nb-option>
                </nb-select>

                <input type="number" nbInput class="ml-3" />
              </div>
              <div class="col-2">
                <button
                  (click)="removeWaitingPeriod(i)"
                  nbButton
                  status="danger"
                  *ngIf="waitingPeriod.controls.length > 1"
                >
                  Remove
                </button>
                <button
                  type="button"
                  (click)="addWaitingPeriod()"
                  nbButton
                  status="primary"
                  *ngIf="i + 1 == waitingPeriod.controls.length"
                >
                  Add
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </nb-card-body>
</nb-card>

<nb-card>
  <nb-card-header>Coverage Conditions</nb-card-header>
  <nb-card-body class="text-left">
    <form [formGroup]="coverageForm">
      <div formArrayName="coverage">
        <div *ngFor="let condition of coverage.controls; let i = index">
          <div [formGroupName]="i">
            <div class="row">
              <div class="col-10">
                {{ i + 1 }}.
                <nb-select placeholder="Select Time Period">
                  <nb-option value="">Option empty</nb-option>
                  <nb-option value="0">Option 0</nb-option>
                  <nb-option value="1">Option 1</nb-option>
                  <nb-option value="2">Option 2</nb-option>
                  <nb-option value="3">Option 3</nb-option>
                  <nb-option value="4">Option 4</nb-option>
                </nb-select>

                <nb-select placeholder="Select Time Period" class="ml-1">
                  <nb-option value="">Option empty</nb-option>
                  <nb-option value="0">Option 0</nb-option>
                  <nb-option value="1">Option 1</nb-option>
                  <nb-option value="2">Option 2</nb-option>
                  <nb-option value="3">Option 3</nb-option>
                  <nb-option value="4">Option 4</nb-option>
                </nb-select>

                <nb-select placeholder="Select Time Period" class="ml-2">
                  <nb-option value="">Option empty</nb-option>
                  <nb-option value="0">Option 0</nb-option>
                  <nb-option value="1">Option 1</nb-option>
                  <nb-option value="2">Option 2</nb-option>
                  <nb-option value="3">Option 3</nb-option>
                  <nb-option value="4">Option 4</nb-option>
                </nb-select>
              </div>
              <div class="col-2">
                <button
                  (click)="removeCoverage(i)"
                  nbButton
                  status="danger"
                  *ngIf="coverage.controls.length > 1"
                >
                  Remove
                </button>
                <button
                  type="button"
                  (click)="addCoverage()"
                  nbButton
                  status="primary"
                  *ngIf="i + 1 == coverage.controls.length"
                >
                  Add
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </nb-card-body>
</nb-card>

<div class="text-center">
  <button nbButton status="primary" (click)="onSubmit()">Save</button>
</div>
